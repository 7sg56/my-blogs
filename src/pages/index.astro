---
import Layout from "../layouts/Layout.astro";
import { Hero } from "../components/Hero";
import { BlogList } from "../components/BlogList";
import { Footer } from "../components/Footer";
import { getCollection } from "astro:content";

// Feature only the latest 3 posts on home
const allPosts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
const featuredPosts = allPosts.slice(0, 3);
---

<Layout title="7sg56.xyz | Digital Garden">
	<main>
		<Hero client:load />

		<div class="w-full bg-black border-t border-white/10">
			<div class="py-12 px-4 max-w-7xl mx-auto">
				<h2
					class="text-3xl font-bold mb-8 text-center uppercase tracking-widest"
				>
					Latest Highlights
				</h2>
				<BlogList client:visible posts={featuredPosts} />
				<div class="flex justify-center mt-12">
					<a
						href="/blog"
						class="px-8 py-3 rounded-full border border-white/20 hover:bg-white/10 transition-colors uppercase text-sm font-bold tracking-widest"
						>View All Archives</a
					>
				</div>
			</div>
		</div>
	</main>

	<Footer client:visible />
</Layout>
